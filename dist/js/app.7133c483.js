(function(){"use strict";var t={459:function(t,e,n){var a=n(5130),o=n(6768);function r(t,e,n,a,r,i){const s=(0,o.g2)("HelloWorld");return(0,o.uX)(),(0,o.Wv)(s)}var i=n(4232);const s={class:"box"},l={class:"right-box"},c={class:"content-box"},d=(0,o.Lk)("label",null,"公司名字: ",-1),u={class:"content-box"},h=(0,o.Lk)("label",null,"公司税号: ",-1),f={class:"content-box"},p=(0,o.Lk)("label",null,"邮箱账号: ",-1),g={class:"content-box"},x=(0,o.Lk)("label",null,"公司地址: ",-1),m={class:"content-box"},w=(0,o.Lk)("label",null,"收据描述: ",-1),v={class:"content-box"},y=(0,o.Lk)("label",null,"收据金额: ",-1),b={class:"content-box"},T={class:"content-box"},k={ref:"canvas"};function F(t,e,n,r,F,L){return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.Lk)("div",l,[(0,o.Lk)("div",c,[d,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>F.name=t)},null,512),[[a.Jo,F.name]])]),(0,o.Lk)("div",u,[h,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>F.tax=t)},null,512),[[a.Jo,F.tax]])]),(0,o.Lk)("div",f,[p,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>F.email=t)},null,512),[[a.Jo,F.email]])]),(0,o.Lk)("div",g,[x,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>F.address=t),placeholder:"默认不填"},null,512),[[a.Jo,F.address]])]),(0,o.Lk)("div",m,[w,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=t=>F.description=t)},null,512),[[a.Jo,F.description]])]),(0,o.Lk)("div",v,[y,(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":e[5]||(e[5]=t=>F.money=t),placeholder:"只可以填纯数字"},null,512),[[a.Jo,F.money]])]),(0,o.Lk)("div",b,[(0,o.Lk)("button",{onClick:e[6]||(e[6]=(...t)=>L.reloadPage&&L.reloadPage(...t))},"刷新"),(0,o.Lk)("button",{onClick:e[7]||(e[7]=(...t)=>L.drawNew&&L.drawNew(...t))},"生成"),(0,o.Lk)("button",{onClick:e[8]||(e[8]=(...t)=>L.taxSwitchF&&L.taxSwitchF(...t))},[(0,o.eW)("是否含税? = "),(0,o.Lk)("span",{style:(0,i.Tr)([{color:"red"},{color:F.taxSwitch?"green":"red"}])},(0,i.v_)(F.taxSwitch),5)])]),(0,o.Lk)("div",T,[(0,o.Lk)("button",{onClick:e[9]||(e[9]=(...t)=>L.exportToPDF&&L.exportToPDF(...t))},"导出为PDF"),(0,o.Lk)("button",{onClick:e[10]||(e[10]=(...t)=>L.exportToImg&&L.exportToImg(...t))},"导出为图片")])]),(0,o.Lk)("canvas",k,null,512)])}var L=n(1749),A={data(){return{name:"",email:"",address:"",tax:"",description:"Network Services",money:null,imageLoaded:!1,taxSwitch:!0,textColor:"#000000",fapiao:n(1630),initialCanvasImage:null}},mounted(){this.loadImage()},methods:{taxSwitchF(){this.taxSwitch=!this.taxSwitch},reloadPage(){if(this.initialCanvasImage){const t=this.$refs.canvas,e=t.getContext("2d");e.clearRect(0,0,t.width,t.height),e.drawImage(this.initialCanvasImage,0,0)}},loadImage(){const t=new Image;t.onload=()=>{this.setupCanvas(t),this.adjustImage()},t.src=this.fapiao},setupCanvas(t){const e=this.$refs.canvas,n=e.getContext("2d");e.width=t.width,e.height=t.height,n.drawImage(t,0,0),this.imageLoaded=!0,this.initialCanvasImage=new Image,this.initialCanvasImage.src=e.toDataURL()},adjustImage(){const t=this.$refs.canvas,e=t.getContext("2d");let n=e.getImageData(0,0,t.width,t.height);n=this.applyContrast(n,30),e.putImageData(n,0,0),this.calculateTextColor(n)},calculateTextColor(t){let e=0,n=0,a=0,o=0;const r=t.data;for(let s=0;s<r.length;s+=4)e+=r[s],n+=r[s+1],a+=r[s+2],o++;e/=o,n/=o,a/=o;const i=Math.sqrt(.299*e*e+.587*n*n+.114*a*a);this.textColor=i>128?"#000000":"#FFFFFF"},applyContrast(t,e){const n=259*(e+255)/(255*(259-e));for(let a=0;a<t.data.length;a+=4)t.data[a]=n*(t.data[a]-128)+128,t.data[a+1]=n*(t.data[a+1]-128)+128,t.data[a+2]=n*(t.data[a+2]-128)+128;return t},drawText(t,e,n,a,o,r=!1){if(!this.imageLoaded)return;const i=this.$refs.canvas,s=i.getContext("2d");if(s.drawImage(i,0,0),s.font=a,s.fillStyle="#030030",s.textAlign=r?"right":"left",1==o)s.fillText(t,e,n);else if(/[a-zA-Z]/.test(this.name)){let a=0,o=e,r=n;for(let e=0;e<t.length;e++){const n=t[e];s.fillText(n,o,r);const i=s.measureText(n);o+=i.width+a}}else{let a=0,o=e,r=n;for(let e=0;e<t.length;e++){const n=t[e];s.fillText(n,o,r);const i=s.measureText(n);o+=i.width+a}}},getTodayDate(t){let e=new Date;e.setDate(e.getDate()+t);let n=e.getDate().toString().padStart(2,"0"),a=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getFullYear();return`${n}/${a}/${o}`},getRandomNumber(){let t=Math.floor(900*Math.random()+100);return t},drawDate(){this.drawText("Tax",530,124,"300 17px Agency FB",!0),this.drawText("Tax",530,125,"500 17px Agency FB",!0),this.drawText(this.tax,530,145,"500 15px Agency FB",!0),this.drawText("US-"+this.getRandomNumber(),625,210,"500 17px Agency FB",!0,!0),this.drawText(this.getTodayDate(0),625,232,"500 17px Agency FB",!0,!0),this.drawText("2312/2024",625,254,"500 17px Agency FB",!0,!0),this.drawText(this.getTodayDate(15),625,276,"500 17px Agency FB",!0,!0)},drawMoreEmail(){this.drawText(this.email,256,263,"16px Agency FB",!0)},drawMoreAmount(){this.drawText(this.money,400,377,"300 20px Agency FB",!0),this.drawText(this.description,245,377,"300 20px Agency FB",!0),this.drawText(this.money,580,377,"20px Agency FB",!0)},drawMoreTax(){this.taxSwitch?this.drawText((.0625*this.money).toFixed(2),580,414,"20px Agency FB",!0):this.drawText((0).toFixed(2),580,414,"20px Agency FB",!0)},drawMoreTotal(){this.taxSwitch?this.drawText("¥ "+(.0625*this.money+this.money).toFixed(2),560,450,"900 20px Agency FB",!0):this.drawText("¥ "+(0*this.money+this.money).toFixed(2),560,450,"900 20px Agency FB",!0)},drawMoreCompany(){if(/[a-zA-Z]/.test(this.name)){this.drawText(this.name,253,145,"16px Agency FB",!1);let t=this.name.split(" "),e=t[0]+" "+t[1];this.drawText(e,50,377,"18px Agency FB",!1),this.drawText(e,50,377,"18px Agency FB",!1);let n="";for(let a=2;a<t.length;a++)n=n+t[a]+" ",console.log(n);this.drawText(n,50,399,"18px Agency FB",!1),this.drawText(n,50,399,"18px Agency FB",!1)}else this.drawText(this.name,253,145,"16px STZhongsong",!1),this.name.length<10?this.drawText(this.name,50,377,"18px STZhongsong",!1):(this.drawText(this.name.slice(0,8),50,377,"18px STZhongsong",!1),this.drawText(this.name.slice(8),50,399,"18px STZhongsong",!1))},drawNew(){this.drawDate(),this.drawMoreTotal(),this.drawMoreCompany();for(let t=0;t<2;t++)this.drawMoreEmail(),this.drawMoreAmount(),this.drawMoreTax()},exportToImg(){const t=this.$refs.canvas,e=t.toDataURL("image/png"),n=document.createElement("a");n.href=e,n.download="canvas-image.png",n.click()},async exportToPDF(){const t=this.$refs.canvas,e=t.toDataURL("image/jpeg"),n=new L.Ay({orientation:"portrait",unit:"px",format:[t.width,t.height]});n.addImage(e,"JPEG",0,0,t.width,t.height),n.save("image.pdf")}}},C=n(1241);const S=(0,C.A)(A,[["render",F]]);var O=S,j={name:"App",components:{HelloWorld:O}};const B=(0,C.A)(j,[["render",r]]);var I=B;(0,a.Ef)(I).mount("#app")},1630:function(t,e,n){t.exports=n.p+"img/FAPIAO2.b60e792b.png"}},e={};function n(a){var o=e[a];if(void 0!==o)return o.exports;var r=e[a]={exports:{}};return t[a].call(r.exports,r,r.exports,n),r.exports}n.m=t,function(){var t=[];n.O=function(e,a,o,r){if(!a){var i=1/0;for(d=0;d<t.length;d++){a=t[d][0],o=t[d][1],r=t[d][2];for(var s=!0,l=0;l<a.length;l++)(!1&r||i>=r)&&Object.keys(n.O).every((function(t){return n.O[t](a[l])}))?a.splice(l--,1):(s=!1,r<i&&(i=r));if(s){t.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[a,o,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};n.t=function(a,o){if(1&o&&(a=this(a)),8&o)return a;if("object"===typeof a&&a){if(4&o&&a.__esModule)return a;if(16&o&&"function"===typeof a.then)return a}var r=Object.create(null);n.r(r);var i={};t=t||[null,e({}),e([]),e(e)];for(var s=2&o&&a;"object"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((function(t){i[t]=function(){return a[t]}}));return i["default"]=function(){return a},n.d(r,i),r}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,a){return n.f[a](t,e),e}),[]))}}(),function(){n.u=function(t){return"js/"+t+"."+{125:"f964a66b",179:"083cb776",427:"0cab3197"}[t]+".js"}}(),function(){n.miniCssF=function(t){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="fapiao:";n.l=function(a,o,r,i){if(t[a])t[a].push(o);else{var s,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==e+r){s=u;break}}s||(l=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",e+r),s.src=a),t[a]=[o];var h=function(e,n){s.onerror=s.onload=null,clearTimeout(f);var o=t[a];if(delete t[a],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(t){return t(n)})),e)return e(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p=""}(),function(){var t={524:0};n.f.j=function(e,a){var o=n.o(t,e)?t[e]:void 0;if(0!==o)if(o)a.push(o[2]);else{var r=new Promise((function(n,a){o=t[e]=[n,a]}));a.push(o[2]=r);var i=n.p+n.u(e),s=new Error,l=function(a){if(n.o(t,e)&&(o=t[e],0!==o&&(t[e]=void 0),o)){var r=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;s.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",s.name="ChunkLoadError",s.type=r,s.request=i,o[1](s)}};n.l(i,l,"chunk-"+e,e)}},n.O.j=function(e){return 0===t[e]};var e=function(e,a){var o,r,i=a[0],s=a[1],l=a[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(l)var d=l(n)}for(e&&e(a);c<i.length;c++)r=i[c],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(d)},a=self["webpackChunkfapiao"]=self["webpackChunkfapiao"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504],(function(){return n(459)}));a=n.O(a)})();
//# sourceMappingURL=app.7133c483.js.map